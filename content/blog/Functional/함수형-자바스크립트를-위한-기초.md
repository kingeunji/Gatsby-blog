---
title: 함수형 자바스크립트를 위한 기초(1), 일급 함수와 클로저 
date: 2020-11-19 16:11:84
category: functional
draft: false
---

> 해당 포스트는 유인동님의 **함수형 자바스크립트 프로그래밍** 을 참고해 정리한 내용입니다

함수를 잘 다루려면 함수와 관련된 **일급 함수**, **클로저**, **고차 함수**, **콜백 패턴**, **함수 객체의 메서드(bind, vall, apply)** 등의 내용을 잘 알아야 합니다.

함수형 프로그래밍을 작성하기 전에 기초가 되는 함수의 기초 지식들을 알아봅시다!

## 1. 일급 함수

자바스크립트에서 객체는 **일급 객체** 입니다.  
여기서 '일급' 이란 **값을 다룰 수 있다는 의미**로, 아래와 같은 조건을 만족해야 합니다.

- 변수에 담을 수 있다.
- 함수나 메서드의 인자로 넘길 수 있다.
- 함수나 메서드에서 리턴할 수 있다.



자바스크립트에서 모든 객체는 일급 객체이며, 함수도 객체이자 일급 객체입니다.  
그러면 일급 함수는 아래와 같이 추가적인 조건을 만족하는 것을 말합니다.

- 아무 때나 (런타임에서도) 선언이 가능하다.
- 익명으로 선언할 수 있다.
- 익명으로 선언한 함수도 함수나 메서드의 인자로 넘길 수 있다.

```javascript
// (1)
function f1() {}
let a = typeof f1 == "function" ? f1 : function() {}

// (2)
function f2() { return function() {} }

// (3)
(function(a, b) { return a + b })(10, 5) 

// (4)
function callAndAdd(a, b) { return a() + b() }
callAndAdd( function() { return 10 }, function() { return 5 })
```
`(1)` : 함수를 값으로 다룰 수 있음을 보여준다.   
`(2)` : `f2` 는 함수를 리턴한다.   
`(3)` : `a`와 `b`를 더하는 익명 함수를 선언하여 10, 5를 전달하여 실행하였다.   
`(4)` : `callAndAdd` 를 실행하면서 익명 함수를 선언했고, 바로 인자로 사용되었다.    

### 정리 
함수는 언제든지 선언할 수 있고, 인자로 사용할 수 있습니다.  
또한 함수는 인자로 받은 함수를 실행할 수 있고 함수를 리턴할 수 있습니다. 

자기 자신이 곧 기능인 함수는 쉽게 참조 가능하며,   
클래스의 메서드를 사용하는 것보다 간단하고 쉽습니다. 

## 2. 클로저 

매우매우 중요한 **클로저**는 계속해서 활용되기 때문에 정확한 이해가 필요합니다. 

**스코프**란 변수를 어디에서 찾을지를 정한 규칙으로,   
여기서는 **함수 단위의 변수 참조에 대한 것**을 의미합니다. 

클로저를 한줄로 정의하자면, 아래와 같습니다. 
> **클로저**는 자신이 생성될 때의 스코프에서 알 수 있었던 변수를 기억하는 함수이다. 

자바스크립트의 모든 함수는 글로벌 스코프에 선언되거나 함수 안에서 선언됩니다.  
모든 함수들은 상위 스코프를 가지며, 자신이 정의되는 순간의 실행 컨텍스트 안에 있습니다.   
그러면 모든 함수는 곧 클로저일까요? 

관점에 따라 그렇게 해석할 순 있지만 책에서는,   
**속성이나 특징들을 빠짐없이 가지고 있는 특별한 함수** 만을 클로저로 칭하는 것이 옳다고 말합니다. 

```javascript
function parent() {
  let a = 5
  function myfn() {
    console.log(a)
  }
  // 생략
}

function parent2() {
  let a = 5
  function parent1() {
    function myfn() {
      console.log(a)
    }
  }
}
```
`parent` 와 `parent2` 의 `myfn` 에서는 변수 a 를 선언하지 않았지만 사용하고 있습니다.   
`parent` 의 변수 a는 `myfn` 을 생성하는 스코프에서 정의 되었고,   
`parent2`의 변수 a는 `myfn` 을 생성하는 스코프의 상위 스코프에서 정의 되었습니다. 

위와 같은 조건 (상위스코프의 값을 함수 안에서 사용하는 경우)을 충족시키지 않는다면, 클로저가 아닌 일반 함수입니다.  
클로저가 기억할 환경이란 건 자기